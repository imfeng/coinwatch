{"version":3,"sources":["App.js","serviceWorker.js","index.js"],"names":["initialState","isActive","tvol","selected","4h","isLive","socket","nr","period","periodFormatted","totalCoins","App","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","connectSocket","t","io","setState","state","on","res","handleRes","live","keys","symbol","length","slice","last_ten","reduce","acc","curr","i","Math","abs","currVol","volume","prevVol","open","close","prch","time","change","toFixed","filter","x","includes","defineProperty","objectSpread","f","arr","indexOf","disconnect","console","log","computeColor","ticker","handleClick","e","target","value","axios","post","timestamp","then","response","catch","error","baseState","foo","undefined","bind","nextProps","nextState","j","prevProps","prevState","snapshot","_this2","connected","objectWithoutProperties","isEqual","date1","Date","date2","totalVol","hasOwnProperty","_this3","newArr","map","color","name","loc","round","react_default","a","createElement","className","data-toggle","role","concat","style","disabled","onClick","type","dist_default","fadeIn","treemap","root","children","identity","innerPadding","outerPadding","label","d","labelSkipSize","labelTextColor","colorBy","borderWidth","borderColor","motionDamping","motionStiffness","animate","tooltip","data","theme","container","background","Component","Boolean","window","location","hostname","match","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.1ba6ef09.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport io from 'socket.io-client';\nimport axios from 'axios';\nimport { isEqual } from 'lodash';\nimport { ResponsiveTreeMap } from '@nivo/treemap';\nimport Spinner from 'react-spinkit';\nimport './App.css';\n// import logo from './logo.svg';\nlet initialState = {\n  isActive: true,\n  tvol: 0,\n  selected: { '4h': 'active' },\n  isLive: false,\n  socket: null,\n  nr: '',\n  period: '',\n  periodFormatted: '',\n  totalCoins: 0\n};\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.baseState = this.state;\n    this.state = initialState;\n  }\n\n  getClearState() {\n    return {\n      foo: undefined\n    };\n  }\n\n  componentDidMount() {\n    // console.log('cdm called')\n    const setState = this.setState.bind(this);\n\n    axios\n      .post('http://localhost:3231', {\n        timestamp: '4h'\n      })\n      .then(function(response) {\n        setState({ selected: { '4h': 'active' } });\n      })\n      .catch(function(error) {});\n\n    this.connectSocket('4h');\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    var j = Object.keys(nextState);\n    var x = Object.keys(this.state);\n    var xj = j.indexOf('BTCUSDT');\n    var xx = x.indexOf('BTCUSDT');\n\n    // if (\n    //   Object.keys(this.state).length === 111 &&\n    //   Object.keys(this.state).length === Object.keys(nextState).length &&\n    //   this.state.tvol === nextState.tvol &&\n    //   this.state.isActive === nextState.isActive\n    // ) {\n    //   return false;\n    // }\n    return true;\n  }\n\n  // filterState = () => {\n  //   let  {period, nr, isActive, selected, socket, isLive, tvol, ...state} = this.state\n  //   return state;\n  // }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if(Object.keys(this.state.selected)[0] ===\n    this.state.periodFormatted && !this.state.socket.connected) {\n      // console.log('cdu conect')\n      this.connectSocket()\n    }\n    // console.log(Object.keys(prevState).length,Object.keys(this.state).length)\n    let {\n      period,\n      nr,\n      isActive,\n      selected,\n      socket,\n      isLive,\n      tvol,\n      ...state\n    } = prevState;\n\n    let f = Object.keys(state).filter(\n      (i, arr) => state[i].time !== this.state.period\n    );\n    // console.log(f)\n    // console.log(Object.keys(this.state).length, Object.keys(prevState.selected)[0], Object.keys(this.state.selected)[0] )\n    // if(Object.keys(this.state).length >= this.state.nr + Object.keys(initialState).length && Object.keys(prevState.selected)[0] != Object.keys(this.state.selected)[0]) {\n      // console.log('lol')\n    //   if(f.length) this.state.socket.disconnect()\n    // }\n    if(this.state.totalCoins > 100 && isEqual(prevState, this.state)) {\n      // console.log('!!!!!!!!!!!')\n      this.state.socket.disconnect()\n    }\n    var keys = Object.keys(this.state);\n    var dates = Object.keys(this.state[keys[keys.length - 1]]);\n    if (keys.length === 110) {\n      // console.log(dates[dates.length-5])\n    }\n    var date1 = new Date(1542286800000);\n    var date2 = new Date(1542283200000);\n    var hours = Math.abs(date1 - date2) / 36e5;\n\n    let totalVol = Object.keys(this.state).reduce((acc, curr, i) => {\n      if (this.state[curr].hasOwnProperty('currVol')) {\n        acc += this.state[curr].currVol;\n      }\n      return acc;\n    }, 0);\n    if (this.state.tvol !== totalVol) {\n      this.setState({ tvol: totalVol });\n    }\n  }\n\n  connectSocket = t => {\n    // console.log('tttt', t);\n    const socket = io('http://localhost:3231');\n    this.setState({ socket });\n    if (typeof t !== 'string') this.setState({ isLive: !this.state.isLive });\n    socket.on('retrieve', res => {\n      this.handleRes(res, this.state.isLive);\n    });\n  };\n\n  handleRes = (res, live) => {\n    // this.setState({loading: true})\n    // console.log(res[res.nr])\n    if (Object.keys(res[res.symbol]).length > 3) {\n      var keys = Object.keys(res[res.symbol]).slice(-3);\n      // console.log(res.symbol, Object.keys(res[res.symbol]).length)\n      var last_ten = keys.reduce((acc, curr, i) => {\n        acc[curr] = res[res.symbol][curr];\n        return acc;\n      }, {});\n      if (Object.keys(last_ten).length > 2) {\n        // console.log(keys[keys.length - 1],keys[keys.length - 2])\n        let period =\n          Math.abs(keys[keys.length - 1] - keys[keys.length - 2]) / 36e5;\n        let periodFormatted;\n        if(period == 0.08333333333333333) periodFormatted = '5m'\n        if(period == 0.25) periodFormatted = '15m'\n        if(period == 0.5) periodFormatted = '30m'\n        if(period == 1) periodFormatted = '1h'\n        if(period == 4) periodFormatted = '4h'\n        if(period == 8) periodFormatted = '8h'\n        if(period == 24) periodFormatted = '1d'\n        if(period == 168) periodFormatted = '1w'\n        if(period == 744) periodFormatted = '1M'\n        // console.log('===',periodFormatted)\n        let currVol = +last_ten[keys[keys.length - (live ? 1 : 2)]].volume;\n        let prevVol = +last_ten[keys[keys.length - (live ? 2 : 3)]].volume;\n        let open = +last_ten[keys[keys.length - (live ? 1 : 2)]].open;\n        let close = +last_ten[keys[keys.length - (live ? 1 : 2)]].close;\n        let prch =\n          open < close\n            ? (close / open) * 100 - 100\n            : 100 - (open / close) * 100;\n\n        let time =\n          Math.abs(keys[keys.length - 1] - keys[keys.length - 2]) / 36e5;\n        let change = currVol && prevVol ? (currVol / prevVol).toFixed(3) : 0;\n        let totalCoins = Object.keys(this.state).filter(x => !Object.keys(initialState).includes(x));\n        // console.log('ddddd',difference)\n        this.setState({\n          nr: res.nr,\n          totalCoins: totalCoins.length,\n          period,\n          periodFormatted,\n          [res.symbol]: {\n            ...last_ten,\n            time,\n            currVol,\n            prevVol,\n            change,\n            prch: prch.toFixed(2)\n          }\n        });\n        let f = Object.keys(this.state).filter(\n          (i, arr) => this.state[i].time != this.state.period && Object.keys(initialState).indexOf(i) == -1\n        )\n        let h = f.filter(i => Object.keys(initialState).indexOf(i) == -1)\n        let g = Object.keys(this.state).filter(i => f.includes(i));\n\n        // if(f.length == 7)\n        // console.log(f,Object.keys(this.state).length >= this.state.nr + Object.keys(initialState).length)\n        // this.setState({loading: false})\n        // console.log(Object.keys(this.state).length,this.state.nr + Object.keys(initialState).length)\n        // console.log(\n        //   '----',\n        //   Object.keys(this.state).length,\n        //   this.state.nr,\n        //   Object.keys(initialState).length,\n        //   f,\n        //   this.state.isActive,\n        //   Object.keys(this.state.selected)[0],\n        //   this.state.periodFormatted\n        // );\n        if (\n          Object.keys(this.state).length >=\n            this.state.nr + Object.keys(initialState).length &&\n          !f.length && Object.keys(this.state.selected)[0]===this.state.periodFormatted\n        ) {\n          this.setState({ isActive: true });\n          this.state.socket.disconnect();\n          // console.log('if1', this.state.socket.connected);\n        }\n        if (\n          Object.keys(this.state).length >=\n            this.state.nr + Object.keys(initialState).length &&\n          this.state.period == '744' &&\n          f.length == 4 && Object.keys(this.state.selected)[0]===this.state.periodFormatted\n        ) {\n          console.log('if2');\n          this.setState({ isActive: true });\n          this.state.socket.disconnect();\n        }\n\n      }\n    }\n    // if(!live) return\n  };\n\n  computeColor = ticker => {\n    if (this.state[ticker] && this.state[ticker].prch < 0) {\n      return this.state[ticker].prch < -3\n        ? this.state[ticker].prch < -6\n          ? this.state[ticker].prch < -15\n            ? '#DB4B38'\n            : '#E97253'\n          : '#EE9778'\n        : '#fcd3bf';\n    }\n    return this.state[ticker] && this.state[ticker].prch > 3\n      ? this.state[ticker].prch > 10\n        ? this.state[ticker].prch > 15\n          ? '#5FA964'\n          : '#ACD6A0'\n        : '#CDE7C2'\n      : '#e4efdc';\n  };\n\n  handleClick = e => {\n    // console.log(e.target.value);\n    this.connectSocket(e.target.value);\n    this.setState({\n      selected: { [e.target.value]: 'active' },\n      isActive: false\n    });\n    // this.setState({ isActive: true });\n    axios\n      .post('http://localhost:3231', {\n        timestamp: e.target.value\n      })\n      .then(function(response) {\n        // console.log(response);\n      })\n      .catch(function(error) {\n        // console.log(error);\n      });\n  };\n\n  render() {\n    const ar = Object.keys(this.state).map(i => {\n      let color = this.computeColor(i);\n      //Math.round on loc is used to round to the decimals eg 1,188 => 1.19\n      return {\n        name: i.slice(-4) == 'USDT' ? i.slice(0, -4) : i.slice(0, -3),\n        color: color,\n        loc:\n          this.state[i] && +this.state[i].change > 0\n            ? Math.round(this.state[i].change * 100) / 100\n            : 0,\n        prch: this.state[i] && this.state[i].prch,\n        time: this.state[i] && this.state[i].time,\n      };\n    });\n    var newArr = ar.filter(i => i.time == this.state.period);\n    // console.log('render', this.state.isActive)\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          <div className=\"btn-group\" data-toggle=\"buttons\" role=\"group\">\n            <button\n              value=\"Live\"\n              className={`btn btn-danger ${\n                this.state.isLive ? 'active' : null\n              }`}\n            >\n              Live\n              <div\n                style={{ color: '#ffffff' }}\n                className=\"la-ball-scale-multiple la-dark la-sm\"\n              >\n                <div />\n                <div />\n                <div />\n              </div>\n            </button>\n            <button\n              disabled={!this.state.isActive}\n              value=\"5m\"\n              onClick={this.handleClick}\n              type=\"button\"\n              className={`btn btn-secondary ${this.state.selected['5m']}`}\n            >\n              5m\n            </button>\n            <button\n              disabled={!this.state.isActive}\n              value=\"15m\"\n              onClick={this.handleClick}\n              type=\"button\"\n              className={`btn btn-secondary ${this.state.selected['15m']}`}\n            >\n              15m\n            </button>\n            <button\n              disabled={!this.state.isActive}\n              value=\"30m\"\n              onClick={this.handleClick}\n              type=\"button\"\n              className={`btn btn-secondary ${this.state.selected['30m']}`}\n            >\n              30m\n            </button>\n            <button\n              disabled={!this.state.isActive}\n              value=\"1h\"\n              onClick={this.handleClick}\n              type=\"button\"\n              className={`btn btn-secondary ${this.state.selected['1h']}`}\n            >\n              1H\n            </button>\n            <button\n              disabled={!this.state.isActive}\n              value=\"4h\"\n              onClick={this.handleClick}\n              type=\"button\"\n              className={`btn btn-secondary ${this.state.selected['4h']}`}\n            >\n              4H\n            </button>\n            <button\n              disabled={!this.state.isActive}\n              value=\"8h\"\n              onClick={this.handleClick}\n              type=\"button\"\n              className={`btn btn-secondary ${this.state.selected['8h']}`}\n            >\n              8H\n            </button>\n            <button\n              disabled={!this.state.isActive}\n              value=\"1d\"\n              onClick={this.handleClick}\n              type=\"button\"\n              className={`btn btn-secondary ${this.state.selected['1d']}`}\n            >\n              1D\n            </button>\n            <button\n              disabled={!this.state.isActive}\n              value=\"1w\"\n              onClick={this.handleClick}\n              type=\"button\"\n              className={`btn btn-secondary ${this.state.selected['1w']}`}\n            >\n              1W\n            </button>\n            <button\n              disabled={!this.state.isActive}\n              value=\"1M\"\n              onClick={this.handleClick}\n              type=\"button\"\n              className={`btn btn-secondary ${this.state.selected['1M']}`}\n            >\n              1M\n            </button>\n          </div>\n        </header>\n        {this.state.isActive ? null :\n        <Spinner fadeIn=\"quarter\" className=\"spinner\"/>\n        }\n\n        {Object.keys(this.state).length > 110 ? (\n          <ResponsiveTreeMap\n            root={{\n              name: 'crypto-signal',\n              color: '#f3f9ef',\n              children: newArr\n            }}\n            identity=\"name\"\n            value=\"loc\"\n            innerPadding={3}\n            outerPadding={4}\n            label={d => `${d.name} ${d.prch ? d.prch + '% ' + d.time : ''}`}\n            labelSkipSize={8}\n            labelTextColor=\"inherit:darker(3.2)\"\n            colorBy={d => d.color}\n            borderWidth={1}\n            borderColor=\"inherit:darker(2.3)\"\n            motionDamping={35}\n            motionStiffness={300}\n            animate={false}\n            tooltip={props => {\n              return (\n                <p style={{ color: props.data.color }}>\n                  {' '}\n                  {`${props.data.name} ${\n                    props.data.loc ? props.data.loc + 'x' : ''\n                  }`}{' '}\n                </p>\n              );\n            }}\n            theme={{\n              tooltip: { container: { color: '#fff', background: '#333' } }\n            }}\n          />\n        ) : (\n          <Spinner fadeIn=\"quarter\" className=\"spinner\"/>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}